(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{458:function(s,t,a){s.exports=a.p+"assets/img/language-type.36f0f5bd.png"},459:function(s,t,a){s.exports=a.p+"assets/img/data-type.85b87602.png"},460:function(s,t,a){s.exports=a.p+"assets/img/stack-heap.9411221e.png"},461:function(s,t,a){s.exports=a.p+"assets/img/stack-heap-4.22100df5.png"},462:function(s,t,a){s.exports=a.p+"assets/img/stack-heap-execution-context.d7153d00.png"},463:function(s,t,a){s.exports=a.p+"assets/img/stack-heap-5.51127624.png"},464:function(s,t,a){s.exports=a.p+"assets/img/return-innerBar.f9dd29ff.png"},527:function(s,t,a){"use strict";a.r(t);var n=a(27),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" b "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  a "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2")]),s._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('" 小明 "')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" b "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('" 小强 "')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// {name: ' 小强 '}")]),s._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// {name: ' 小强 '}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"javascript-是什么类型的语言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#javascript-是什么类型的语言"}},[s._v("#")]),s._v(" "),n("code",[s._v("JavaScript")]),s._v(" 是什么类型的语言")]),s._v(" "),n("p",[n("code",[s._v("C")]),s._v("语言在定义变量之前，需要确定变量的类型")]),s._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" b "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('" hello "')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   bool c "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" true"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("ul",[n("li",[s._v("在使用之前需要确认变量数据类型的语言称为"),n("strong",[s._v("静态语言")])]),s._v(" "),n("li",[s._v("在运行过程中需要检查数据类型的语言称为"),n("strong",[s._v("动态语言")])]),s._v(" "),n("li",[s._v("支持隐式类型转换的语言称为"),n("strong",[s._v("弱类型语言")])]),s._v(" "),n("li",[s._v("不支持隐式类型转换的语言称为"),n("strong",[s._v("强类型语言")])])]),s._v(" "),n("p",[n("img",{attrs:{src:a(458),alt:"language-type"}})]),s._v(" "),n("p",[n("code",[s._v("JavaScript")]),s._v(" 是一种弱类型的、动态的语言")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("弱类型")]),s._v("，意味着不需要告诉 "),n("code",[s._v("JavaScript")]),s._v("引擎变量是什么数据类型")]),s._v(" "),n("li",[n("strong",[s._v("动态")]),s._v("，意味着一个变量可以保存不同类型的数据。")])]),s._v(" "),n("h2",{attrs:{id:"javascript-的数据类型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#javascript-的数据类型"}},[s._v("#")]),s._v(" "),n("code",[s._v("JavaScript")]),s._v(" 的数据类型")]),s._v(" "),n("p",[n("img",{attrs:{src:a(459),alt:"data-type"}})]),s._v(" "),n("ul",[n("li",[n("code",[s._v("typeof")]),s._v(" 检测 "),n("code",[s._v("Null")]),s._v(" 类型时，返回的是 "),n("code",[s._v("Object")]),s._v(",这是当初 "),n("code",[s._v("JavaScript")]),s._v("语言的一个"),n("code",[s._v("Bug")]),s._v("，一直保留至今，之所以一直没修改过来，主要是为了兼容老的代码。")]),s._v(" "),n("li",[n("code",[s._v("Object")]),s._v(" 是由 "),n("code",[s._v("key-value")]),s._v(" 组成的，其中的"),n("code",[s._v("vaule")]),s._v("可以是任何类型，包括函数."),n("code",[s._v("Object")]),s._v("中的函数又称为方法")]),s._v(" "),n("li",[s._v("前面的"),n("code",[s._v("7")]),s._v("种数据类型称为"),n("strong",[s._v("原始类型")]),s._v("，对象类型称为"),n("strong",[s._v("引用类型")]),s._v(".之所以把它们区分为两种不同的类型，是因为它们在内存中存放的位置不一样")])]),s._v(" "),n("h2",{attrs:{id:"内存空间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#内存空间"}},[s._v("#")]),s._v(" 内存空间")]),s._v(" "),n("p",[n("code",[s._v("JavaScript")]),s._v(" 执行过程中， 主要有三种类型内存空间，分别是"),n("strong",[s._v("代码空间")]),s._v("、"),n("strong",[s._v("栈空间")]),s._v("和"),n("strong",[s._v("堆空间")]),s._v("。")]),s._v(" "),n("p",[s._v("代码空间主要是存储可执行代码的")]),s._v(" "),n("h3",{attrs:{id:"栈空间和堆空间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#栈空间和堆空间"}},[s._v("#")]),s._v(" 栈空间和堆空间")]),s._v(" "),n("p",[s._v("栈空间也就是调用栈，用来存储执行上下文")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('" 极客时间 "')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" b "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" c "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('" 极客时间 "')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" d "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" c"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("执行代码时，先编译，并创建执行上下文，然后再按照顺序执行代码。当执行到第 "),n("code",[s._v("3")]),s._v("行代码时，调用栈的状态\n"),n("img",{attrs:{src:a(460),alt:"stack-heap"}})]),s._v(" "),n("p",[s._v("执行第 "),n("code",[s._v("4")]),s._v("行代码时\n"),n("img",{attrs:{src:a(461),alt:"stack-heap-4"}})]),s._v(" "),n("p",[s._v("原始类型的数据值都是直接保存在"),n("strong",[s._v("栈")]),s._v("中,引用类型的值是存放在"),n("strong",[s._v("堆")]),s._v("中")]),s._v(" "),n("p",[s._v("为什么一定要分"),n("strong",[s._v("堆")]),s._v("和"),n("strong",[s._v("栈")]),s._v("两个存储空间呢？所有数据直接存放在"),n("strong",[s._v("栈")]),s._v("中不就可以了吗？")]),s._v(" "),n("p",[n("code",[s._v("JavaScript")]),s._v("引擎需要用栈来维护程序执行期间上下文的状态，如果栈空间大了话，所有的数据都存放在栈空间里面，那么会影响到上下文切换的效率，进而又影响到整个程序的执行效率")]),s._v(" "),n("p",[n("img",{attrs:{src:a(462),alt:"sstack-heap-execution-context"}})]),s._v(" "),n("p",[s._v("执行第 "),n("code",[s._v("5")]),s._v("行代码时\n"),n("img",{attrs:{src:a(463),alt:"sstack-heap-5"}})]),s._v(" "),n("p",[s._v("原始类型的赋值会完整复制变量值，而引用类型的赋值是复制引用地址。")]),s._v(" "),n("h2",{attrs:{id:"闭包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#闭包"}},[s._v("#")]),s._v(" 闭包")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" myName "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('" 小明 "')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" test1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" test2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" innerBar "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("setName")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("newName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      myName "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" newName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("getName")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("test1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" myName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" innerBar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" bar "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nbar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('" 小强 "')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nbar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("p",[s._v("你应该有过这样的分析：由于变量 "),n("code",[s._v("myName、test1、test2")]),s._v(" 都是原始类型数据，所以在执行"),n("code",[s._v("foo")]),s._v(" 函数的时候，它们会被压入到调用栈中；当"),n("code",[s._v("foo")]),s._v("函数执行结束之后，调用栈中 "),n("code",[s._v("foo")]),s._v(" 函数的执行上下文会被销毁，内部变量 "),n("code",[s._v("myName、test1、test2")]),s._v(" 也应该一同被销毁。")]),s._v(" "),n("p",[s._v("实际上,当 "),n("code",[s._v("foo")]),s._v(" 函数的执行上下文销毁时，"),n("code",[s._v("foo")]),s._v(" 函数产生了闭包，变量 "),n("code",[s._v("myName")]),s._v(" 和 "),n("code",[s._v("test1")]),s._v(" 并没有被销毁，而是保存在内存中")]),s._v(" "),n("p",[s._v("分析这段代码的执行流程")]),s._v(" "),n("ul",[n("li",[s._v("当 "),n("code",[s._v("JavaScript")]),s._v("引擎执行到 "),n("code",[s._v("foo")]),s._v(" 函数时，首先会编译，并创建一个空执行上下文。")]),s._v(" "),n("li",[s._v("在编译过程中，遇到内部函数 "),n("code",[s._v("setName")]),s._v("，"),n("code",[s._v("JavaScript")]),s._v("引擎还要对内部函数做一次快速的词法扫描，发现该内部函数引用了 "),n("code",[s._v("foo")]),s._v(" 函数中的 "),n("code",[s._v("myName")]),s._v(" 变量，由于是内部函数引用了外部函数的变量，所以 "),n("code",[s._v("JavaScript")]),s._v(" 引擎判断这是一个闭包，于是在堆空间创建换一个"),n("code",[s._v("closure(foo)")]),s._v("的对象（这是一个内部对象，"),n("code",[s._v("JavaScript")]),s._v(" 是无法访问的），用来保存"),n("code",[s._v("myName")]),s._v(" 变量。")]),s._v(" "),n("li",[s._v("接着继续扫描到 "),n("code",[s._v("getName")]),s._v("方法时，发现该函数内部还引用变量 "),n("code",[s._v("test1")]),s._v("，于是 "),n("code",[s._v("JavaScript")]),s._v("引擎又将"),n("code",[s._v("test1")]),s._v(" 添加到"),n("code",[s._v("closure(foo)")]),s._v("对象中")]),s._v(" "),n("li",[n("code",[s._v("test2")]),s._v(" 并没有被内部函数引用，所以 "),n("code",[s._v("test2")]),s._v(" 依然保存在调用栈中")])]),s._v(" "),n("p",[n("code",[s._v("return innerBar")]),s._v("时的调用栈状态\n"),n("img",{attrs:{src:a(464),alt:"return-innerBar"}})]),s._v(" "),n("p",[s._v("当执行到"),n("code",[s._v("foo")]),s._v("函数时，闭包就产生了；当 "),n("code",[s._v("foo")]),s._v("函数执行结束之后，返回的 "),n("code",[s._v("getName")]),s._v(" 和 "),n("code",[s._v("setName")]),s._v(" 方法都引用"),n("code",[s._v("clourse(foo)")]),s._v("对象，所以即使 "),n("code",[s._v("foo")]),s._v(" 函数退出了，"),n("code",[s._v("clourse(foo)")]),s._v("对象依然被其内部的"),n("code",[s._v("getName")]),s._v("和 "),n("code",[s._v("setName")]),s._v(" 方法引用。所以在下次调用 b"),n("code",[s._v("ar.setName")]),s._v("或者"),n("code",[s._v("bar.getName")]),s._v("时，创建的执行上下文中就包含了"),n("code",[s._v("clourse(foo)")]),s._v("。")]),s._v(" "),n("p",[s._v("产生闭包的核心有两步：")]),s._v(" "),n("ul",[n("li",[s._v("第一步是需要预扫描内部函数")]),s._v(" "),n("li",[s._v("第二步是把内部函数引用的外部变量保存到堆中。")])])])}),[],!1,null,null,null);t.default=e.exports}}]);