<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>栈空间和堆空间 | 草莓牛奶</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/docs/strawberry.png">
    <meta name="description" content="一个笔记本">
    <meta name="author" content="草莓牛奶">
    <meta name="Keywords" content="vuepress 介绍, vuepress 说明, 草莓牛奶">
    
    <link rel="preload" href="/docs/assets/css/0.styles.6b8e1be2.css" as="style"><link rel="preload" href="/docs/assets/js/app.135ddea0.js" as="script"><link rel="preload" href="/docs/assets/js/2.0d314aad.js" as="script"><link rel="preload" href="/docs/assets/js/11.f1e0afb2.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.7c337495.js"><link rel="prefetch" href="/docs/assets/js/12.a065bd13.js"><link rel="prefetch" href="/docs/assets/js/13.8665bb28.js"><link rel="prefetch" href="/docs/assets/js/14.03d2ab10.js"><link rel="prefetch" href="/docs/assets/js/15.8497149d.js"><link rel="prefetch" href="/docs/assets/js/16.dade3c8f.js"><link rel="prefetch" href="/docs/assets/js/17.970f7cf4.js"><link rel="prefetch" href="/docs/assets/js/18.f4306cd0.js"><link rel="prefetch" href="/docs/assets/js/19.e81f0ed4.js"><link rel="prefetch" href="/docs/assets/js/20.a8e6359b.js"><link rel="prefetch" href="/docs/assets/js/21.f426df4b.js"><link rel="prefetch" href="/docs/assets/js/22.5af4ce64.js"><link rel="prefetch" href="/docs/assets/js/23.0208cc98.js"><link rel="prefetch" href="/docs/assets/js/24.e48bdb06.js"><link rel="prefetch" href="/docs/assets/js/25.1fa309ff.js"><link rel="prefetch" href="/docs/assets/js/26.21604a18.js"><link rel="prefetch" href="/docs/assets/js/27.f4140d1d.js"><link rel="prefetch" href="/docs/assets/js/28.96d185c6.js"><link rel="prefetch" href="/docs/assets/js/29.a0468e7b.js"><link rel="prefetch" href="/docs/assets/js/3.3b656f42.js"><link rel="prefetch" href="/docs/assets/js/30.715728ed.js"><link rel="prefetch" href="/docs/assets/js/31.00a530ac.js"><link rel="prefetch" href="/docs/assets/js/32.6fe9c790.js"><link rel="prefetch" href="/docs/assets/js/33.f458c621.js"><link rel="prefetch" href="/docs/assets/js/34.1c67f057.js"><link rel="prefetch" href="/docs/assets/js/35.e1780e14.js"><link rel="prefetch" href="/docs/assets/js/36.75bd2c2a.js"><link rel="prefetch" href="/docs/assets/js/37.72c4a057.js"><link rel="prefetch" href="/docs/assets/js/38.f28e0836.js"><link rel="prefetch" href="/docs/assets/js/39.a07ed9d2.js"><link rel="prefetch" href="/docs/assets/js/4.f9b3154f.js"><link rel="prefetch" href="/docs/assets/js/40.6c81b9bf.js"><link rel="prefetch" href="/docs/assets/js/41.da64a1b9.js"><link rel="prefetch" href="/docs/assets/js/42.e5ba2d29.js"><link rel="prefetch" href="/docs/assets/js/43.406166a7.js"><link rel="prefetch" href="/docs/assets/js/44.6548d1a5.js"><link rel="prefetch" href="/docs/assets/js/45.a90f669f.js"><link rel="prefetch" href="/docs/assets/js/46.54a39760.js"><link rel="prefetch" href="/docs/assets/js/47.71762ad0.js"><link rel="prefetch" href="/docs/assets/js/48.ce62ad53.js"><link rel="prefetch" href="/docs/assets/js/5.9fe2663c.js"><link rel="prefetch" href="/docs/assets/js/6.6e8f5c2e.js"><link rel="prefetch" href="/docs/assets/js/7.432a0e89.js"><link rel="prefetch" href="/docs/assets/js/8.e893d3a0.js"><link rel="prefetch" href="/docs/assets/js/9.900ce603.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.6b8e1be2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="milk.png" alt="草莓牛奶" class="logo"> <span class="site-name can-hide">草莓牛奶</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><span class="title">指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="指南" class="mobile-dropdown-title"><span class="title">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/guide/" class="nav-link">
  Markdown语法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习" class="dropdown-title"><span class="title">学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习" class="mobile-dropdown-title"><span class="title">学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/study/javaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/study/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/docs/study/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/docs/study/git/base01.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/docs/study/vue/base01.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/docs/study/english/base01.html" class="nav-link">
  English
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="路线" class="dropdown-title"><span class="title">路线</span> <span class="arrow down"></span></button> <button type="button" aria-label="路线" class="mobile-dropdown-title"><span class="title">路线</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/route/atguigu/base01.html" class="nav-link">
  尚硅谷
</a></li><li class="dropdown-item"><!----> <a href="/docs/route/coderwhy/base01.html" class="nav-link">
  coderwhy
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><span class="title">进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="进阶" class="mobile-dropdown-title"><span class="title">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/advance/scss/base01.html" class="nav-link">
  Sass
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="读书笔记" class="dropdown-title"><span class="title">读书笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="读书笔记" class="mobile-dropdown-title"><span class="title">读书笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/readingNote/theDefinitiveGuideToHTML5/part1.html" class="nav-link">
  HTML5权威指南
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="专栏" class="dropdown-title"><span class="title">专栏</span> <span class="arrow down"></span></button> <button type="button" aria-label="专栏" class="mobile-dropdown-title"><span class="title">专栏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/special-column/browser/base01.html" class="nav-link">
  浏览器工作原理与实践
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/zhaodesen" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/strawberry_milk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><span class="title">指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="指南" class="mobile-dropdown-title"><span class="title">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/guide/" class="nav-link">
  Markdown语法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习" class="dropdown-title"><span class="title">学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习" class="mobile-dropdown-title"><span class="title">学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/study/javaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/study/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/docs/study/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/docs/study/git/base01.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/docs/study/vue/base01.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/docs/study/english/base01.html" class="nav-link">
  English
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="路线" class="dropdown-title"><span class="title">路线</span> <span class="arrow down"></span></button> <button type="button" aria-label="路线" class="mobile-dropdown-title"><span class="title">路线</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/route/atguigu/base01.html" class="nav-link">
  尚硅谷
</a></li><li class="dropdown-item"><!----> <a href="/docs/route/coderwhy/base01.html" class="nav-link">
  coderwhy
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><span class="title">进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="进阶" class="mobile-dropdown-title"><span class="title">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/advance/scss/base01.html" class="nav-link">
  Sass
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="读书笔记" class="dropdown-title"><span class="title">读书笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="读书笔记" class="mobile-dropdown-title"><span class="title">读书笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/readingNote/theDefinitiveGuideToHTML5/part1.html" class="nav-link">
  HTML5权威指南
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="专栏" class="dropdown-title"><span class="title">专栏</span> <span class="arrow down"></span></button> <button type="button" aria-label="专栏" class="mobile-dropdown-title"><span class="title">专栏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/special-column/browser/base01.html" class="nav-link">
  浏览器工作原理与实践
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/zhaodesen" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/strawberry_milk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Browser</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/special-column/browser/base01.html" class="sidebar-link">Chrome架构</a></li><li><a href="/docs/special-column/browser/base02.html" class="sidebar-link">TCP协议</a></li><li><a href="/docs/special-column/browser/base03.html" class="sidebar-link">HTTP请求流程</a></li><li><a href="/docs/special-column/browser/base04.html" class="sidebar-link">导航流程</a></li><li><a href="/docs/special-column/browser/base05.html" class="sidebar-link">渲染流程</a></li><li><a href="/docs/special-column/browser/base06.html" class="sidebar-link">变量提升</a></li><li><a href="/docs/special-column/browser/base07.html" class="sidebar-link">调用栈</a></li><li><a href="/docs/special-column/browser/base08.html" class="sidebar-link">块级作用域</a></li><li><a href="/docs/special-column/browser/base09.html" class="sidebar-link">作用域链和闭包</a></li><li><a href="/docs/special-column/browser/base10.html" class="sidebar-link">this</a></li><li><a href="/docs/special-column/browser/base11.html" aria-current="page" class="active sidebar-link">栈空间和堆空间</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/special-column/browser/base11.html#javascript-是什么类型的语言" class="sidebar-link">JavaScript 是什么类型的语言</a></li><li class="sidebar-sub-header"><a href="/docs/special-column/browser/base11.html#javascript-的数据类型" class="sidebar-link">JavaScript 的数据类型</a></li><li class="sidebar-sub-header"><a href="/docs/special-column/browser/base11.html#内存空间" class="sidebar-link">内存空间</a></li><li class="sidebar-sub-header"><a href="/docs/special-column/browser/base11.html#闭包" class="sidebar-link">闭包</a></li></ul></li><li><a href="/docs/special-column/browser/base12.html" class="sidebar-link">垃圾回收</a></li><li><a href="/docs/special-column/browser/base13.html" class="sidebar-link">编译器和解释器</a></li><li><a href="/docs/special-column/browser/base14.html" class="sidebar-link">消息队列和事件循环</a></li><li><a href="/docs/special-column/browser/base15.html" class="sidebar-link">setTimeout</a></li><li><a href="/docs/special-column/browser/base16.html" class="sidebar-link">XMLHttpRequest</a></li><li><a href="/docs/special-column/browser/base17.html" class="sidebar-link">宏任务和微任务</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
  a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot; 小明 &quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
  a<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot; 小强 &quot;</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {name: ' 小强 '}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {name: ' 小强 '}</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="javascript-是什么类型的语言"><a href="#javascript-是什么类型的语言" class="header-anchor">#</a> <code>JavaScript</code> 是什么类型的语言</h2> <p><code>C</code>语言在定义变量之前，需要确定变量的类型</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
   <span class="token keyword">char</span><span class="token operator">*</span> b <span class="token operator">=</span> <span class="token string">&quot; hello &quot;</span><span class="token punctuation">;</span>
   bool c <span class="token operator">=</span> true<span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>在使用之前需要确认变量数据类型的语言称为<strong>静态语言</strong></li> <li>在运行过程中需要检查数据类型的语言称为<strong>动态语言</strong></li> <li>支持隐式类型转换的语言称为<strong>弱类型语言</strong></li> <li>不支持隐式类型转换的语言称为<strong>强类型语言</strong></li></ul> <p><img src="/docs/assets/img/language-type.36f0f5bd.png" alt="language-type"></p> <p><code>JavaScript</code> 是一种弱类型的、动态的语言</p> <ul><li><strong>弱类型</strong>，意味着不需要告诉 <code>JavaScript</code>引擎变量是什么数据类型</li> <li><strong>动态</strong>，意味着一个变量可以保存不同类型的数据。</li></ul> <h2 id="javascript-的数据类型"><a href="#javascript-的数据类型" class="header-anchor">#</a> <code>JavaScript</code> 的数据类型</h2> <p><img src="/docs/assets/img/data-type.85b87602.png" alt="data-type"></p> <ul><li><code>typeof</code> 检测 <code>Null</code> 类型时，返回的是 <code>Object</code>,这是当初 <code>JavaScript</code>语言的一个<code>Bug</code>，一直保留至今，之所以一直没修改过来，主要是为了兼容老的代码。</li> <li><code>Object</code> 是由 <code>key-value</code> 组成的，其中的<code>vaule</code>可以是任何类型，包括函数.<code>Object</code>中的函数又称为方法</li> <li>前面的<code>7</code>种数据类型称为<strong>原始类型</strong>，对象类型称为<strong>引用类型</strong>.之所以把它们区分为两种不同的类型，是因为它们在内存中存放的位置不一样</li></ul> <h2 id="内存空间"><a href="#内存空间" class="header-anchor">#</a> 内存空间</h2> <p><code>JavaScript</code> 执行过程中， 主要有三种类型内存空间，分别是<strong>代码空间</strong>、<strong>栈空间</strong>和<strong>堆空间</strong>。</p> <p>代码空间主要是存储可执行代码的</p> <h3 id="栈空间和堆空间"><a href="#栈空间和堆空间" class="header-anchor">#</a> 栈空间和堆空间</h3> <p>栈空间也就是调用栈，用来存储执行上下文</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">&quot; 极客时间 &quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
  <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot; 极客时间 &quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> d <span class="token operator">=</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>执行代码时，先编译，并创建执行上下文，然后再按照顺序执行代码。当执行到第 <code>3</code>行代码时，调用栈的状态
<img src="/docs/assets/img/stack-heap.9411221e.png" alt="stack-heap"></p> <p>执行第 <code>4</code>行代码时
<img src="/docs/assets/img/stack-heap-4.22100df5.png" alt="stack-heap-4"></p> <p>原始类型的数据值都是直接保存在<strong>栈</strong>中,引用类型的值是存放在<strong>堆</strong>中</p> <p>为什么一定要分<strong>堆</strong>和<strong>栈</strong>两个存储空间呢？所有数据直接存放在<strong>栈</strong>中不就可以了吗？</p> <p><code>JavaScript</code>引擎需要用栈来维护程序执行期间上下文的状态，如果栈空间大了话，所有的数据都存放在栈空间里面，那么会影响到上下文切换的效率，进而又影响到整个程序的执行效率</p> <p><img src="/docs/assets/img/stack-heap-execution-context.d7153d00.png" alt="sstack-heap-execution-context"></p> <p>执行第 <code>5</code>行代码时
<img src="/docs/assets/img/stack-heap-5.51127624.png" alt="sstack-heap-5"></p> <p>原始类型的赋值会完整复制变量值，而引用类型的赋值是复制引用地址。</p> <h2 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> myName <span class="token operator">=</span> <span class="token string">&quot; 小明 &quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> test1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> test2 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> innerBar <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">setName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      myName <span class="token operator">=</span> newName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test1<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> myName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> innerBar<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bar<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot; 小强 &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bar<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>你应该有过这样的分析：由于变量 <code>myName、test1、test2</code> 都是原始类型数据，所以在执行<code>foo</code> 函数的时候，它们会被压入到调用栈中；当<code>foo</code>函数执行结束之后，调用栈中 <code>foo</code> 函数的执行上下文会被销毁，内部变量 <code>myName、test1、test2</code> 也应该一同被销毁。</p> <p>实际上,当 <code>foo</code> 函数的执行上下文销毁时，<code>foo</code> 函数产生了闭包，变量 <code>myName</code> 和 <code>test1</code> 并没有被销毁，而是保存在内存中</p> <p>分析这段代码的执行流程</p> <ul><li>当 <code>JavaScript</code>引擎执行到 <code>foo</code> 函数时，首先会编译，并创建一个空执行上下文。</li> <li>在编译过程中，遇到内部函数 <code>setName</code>，<code>JavaScript</code>引擎还要对内部函数做一次快速的词法扫描，发现该内部函数引用了 <code>foo</code> 函数中的 <code>myName</code> 变量，由于是内部函数引用了外部函数的变量，所以 <code>JavaScript</code> 引擎判断这是一个闭包，于是在堆空间创建换一个<code>closure(foo)</code>的对象（这是一个内部对象，<code>JavaScript</code> 是无法访问的），用来保存<code>myName</code> 变量。</li> <li>接着继续扫描到 <code>getName</code>方法时，发现该函数内部还引用变量 <code>test1</code>，于是 <code>JavaScript</code>引擎又将<code>test1</code> 添加到<code>closure(foo)</code>对象中</li> <li><code>test2</code> 并没有被内部函数引用，所以 <code>test2</code> 依然保存在调用栈中</li></ul> <p><code>return innerBar</code>时的调用栈状态
<img src="/docs/assets/img/return-innerBar.f9dd29ff.png" alt="return-innerBar"></p> <p>当执行到<code>foo</code>函数时，闭包就产生了；当 <code>foo</code>函数执行结束之后，返回的 <code>getName</code> 和 <code>setName</code> 方法都引用<code>clourse(foo)</code>对象，所以即使 <code>foo</code> 函数退出了，<code>clourse(foo)</code>对象依然被其内部的<code>getName</code>和 <code>setName</code> 方法引用。所以在下次调用 b<code>ar.setName</code>或者<code>bar.getName</code>时，创建的执行上下文中就包含了<code>clourse(foo)</code>。</p> <p>产生闭包的核心有两步：</p> <ul><li>第一步是需要预扫描内部函数</li> <li>第二步是把内部函数引用的外部变量保存到堆中。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/special-column/browser/base10.html" class="prev">
        this
      </a></span> <span class="next"><a href="/docs/special-column/browser/base12.html">
        垃圾回收
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/docs/assets/js/app.135ddea0.js" defer></script><script src="/docs/assets/js/2.0d314aad.js" defer></script><script src="/docs/assets/js/11.f1e0afb2.js" defer></script>
  </body>
</html>
